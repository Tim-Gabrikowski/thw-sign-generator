<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Türschild Designer</title>
		<link rel="stylesheet" href="fonts/font.css" />
		<link rel="stylesheet" href="styles.css" />
		<link rel="stylesheet" href="controlStyles.css" />
		<link rel="stylesheet" href="signStyles.css" />
	</head>
	<body>
		<div id="controls">
			<h1>Türschild Generator</h1>
			<div id="settingsContainer">
				<div class="settingsBlock">
					<h2>Raum</h2>
					<div class="input">
						<label for="roomNumberInput">Raumnummer</label>
						<input
							type="text"
							id="roomNumberInput"
							placeholder="Hier eingeben"
						/>
					</div>
					<div class="input">
						<label for="roomNameInput">Raumname</label>
						<input
							type="text"
							id="roomNameInput"
							placeholder="Hier eingeben"
						/>
					</div>
				</div>
				<div class="settingsBlock" id="personsBlockSettings">
					<div class="header">
						<input
							type="checkbox"
							name="displayPersonsBlock"
							id="displayPersonsBlock"
							checked
						/>
						<h2>Personen</h2>
					</div>
					<div class="input">
						<label for="personNameInput">Name</label
						><input
							type="text"
							name="personNameInput"
							id="personNameInput"
							placeholder="Hier eingeben"
						/>
					</div>
					<div class="input">
						<label for="personPositionInput">Position</label
						><input
							type="text"
							name="personPositionInput"
							id="personPositionInput"
							placeholder="Hier eingeben"
						/>
					</div>
					<div class="input">
						<label for="personImportantInput">Wichtig</label
						><input
							type="checkbox"
							name="personImportantInput"
							id="personImportantInput"
						/>
					</div>

					<button id="addPersonButton">Person hinzufügen</button>

					<div id="personList"></div>
				</div>

				<div class="settingsBlock" id="warningBlockSettings">
					<div class="header">
						<input
							type="checkbox"
							name="displayWarningBlock"
							id="displayWarningBlock"
							checked
						/>
						<h2>Warnschild</h2>
					</div>
					<div class="input">
						<label for="warningHeadingInput">Überschrift</label>
						<input
							type="text"
							name="warningHeadingInput"
							id="warningHeadingInput"
							placeholder="Hier eingeben"
						/>
					</div>
					<div class="input">
						<label for="warningTextInput">Text</label>
						<input
							type="text"
							name="warningTextInput"
							id="warningTextInput"
							placeholder="Hier eingeben"
						/>
					</div>
				</div>

				<div class="settingsBlock" id="imageBlockSettings">
					<div class="header">
						<input
							type="checkbox"
							name="displayImageBlock"
							id="displayImageBlock"
							checked
						/>
						<h2>Bild</h2>
					</div>
					<div class="input">
						<label
							for="imageSelectInput"
							id="imageSelectLabel"
							class="button"
						>
							<p>Bild hochladen</p>
							<img
								src="./img/add_image.svg"
								alt="Bild hochladen"
							/>
						</label>
						<input
							type="file"
							name="imageSelectInput"
							id="imageSelectInput"
							placeholder="./logo/settings.svg"
							style="display: none"
						/>
					</div>
				</div>
			</div>
			<div id="controlButtons">
				<button id="printButton">Drucken</button>
			</div>
		</div>
		<div id="preview">
			<div class="page">
				<div class="roomNr"><h1 id="roomNumber">R-Nr</h1></div>
				<div class="roomName"><h1 id="roomName">Raumname</h1></div>
				<div class="logo">
					<img
						src="./img/logo-ov.svg"
						alt="Technisches Hilfswerk Ortsverband Hamburg-Mitte"
					/>
				</div>
				<div class="mainArea" id="mainArea">
					<!-- <table class="persons">
						<tr>
							<td class="name important">Name</td>
							<td class="function">Funktion</td>
						</tr>
						<tr>
							<td class="name">Name</td>
							<td class="function">Funktion</td>
						</tr>
						<tr>
							<td class="name">Name</td>
							<td class="function">Funktion</td>
						</tr>
					</table> -->
					<!-- <div class="warning">
						<h1>Hygienebereich</h1>
						<h2>Zutritt nur für Befugte!</h2>
					</div> -->
					<!-- <div class="image">
						<img src="./logo/settings.svg" alt="" />
					</div> -->
				</div>
			</div>
		</div>
	</body>
	<script src="configuration.js"></script>
	<script src="render.js"></script>
	<script>
		updateConfigurationDisplay();

		async function generatePreview() {
			let configuration = getCurrentConfiguration();
			await renderPreview(configuration);
		}
		setInterval(generatePreview, 500);

		async function printPreview() {
			await generatePreview();
			window.print();
		}
		document
			.getElementById("printButton")
			.addEventListener("click", printPreview);
	</script>

	<!-- Fuck you, Roboform! -->
	<script>
		document.addEventListener("DOMContentLoaded", () => {
			const sel = '[popover], .inpage-ui-el, .af2, [id^="znGF"]';
			const removeMatches = () => {
				document.querySelectorAll(sel).forEach((el) => el.remove());
			};
			removeMatches();
			// keep removing any new ones
			new MutationObserver(() => removeMatches()).observe(
				document.documentElement,
				{ childList: true, subtree: true }
			);
		});
	</script>
</html>
